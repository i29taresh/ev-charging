{"ast":null,"code":"import { __rest } from \"tslib\";\nvar testLoadFn;\nexport var setTestLoadMode = function (load) {\n  if (process.env.NODE_ENV !== 'production') {\n    testLoadFn = load;\n  }\n};\nexport function loadScript(_a) {\n  var src = _a.src,\n    attr = __rest(_a, [\"src\"]);\n  if (process.env.NODE_ENV !== 'production' && testLoadFn) {\n    var script_1 = document.createElement('script');\n    script_1.src = src;\n    Object.keys(attr).forEach(function (key) {\n      return script_1[key] = attr[key];\n    });\n    document.body.appendChild(script_1);\n    return testLoadFn().then(function () {\n      return {\n        success: true,\n        element: script_1,\n        script: src,\n        error: null\n      };\n    }).catch(function () {\n      return {\n        success: false,\n        element: script_1,\n        script: src,\n        error: new ErrorEvent('test')\n      };\n    });\n  }\n  return new Promise(function (resolve) {\n    var script = document.createElement('script');\n    script.src = src;\n    Object.keys(attr).forEach(function (key) {\n      return script[key] = attr[key];\n    });\n    script.addEventListener('load', function () {\n      return resolve({\n        element: script,\n        script: src,\n        success: true,\n        error: null\n      });\n    });\n    script.addEventListener('error', function (e) {\n      return resolve({\n        element: script,\n        script: src,\n        success: false,\n        error: e\n      });\n    });\n    document.body.appendChild(script);\n  });\n}\nexport function getScriptTag(script) {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  return document.querySelector(\"script[src='\" + script + \"']\");\n}\nexport function removeFailedScript(script) {\n  var node = document.querySelector(\"script[src='\" + script + \"']\");\n  if (node && node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n}","map":{"version":3,"names":["testLoadFn","setTestLoadMode","load","process","env","NODE_ENV","loadScript","_a","src","attr","__rest","script_1","document","createElement","Object","keys","forEach","key","body","appendChild","then","success","element","script","error","catch","ErrorEvent","Promise","resolve","addEventListener","e","getScriptTag","querySelector","removeFailedScript","node","parentNode","removeChild"],"sources":["/Users/bhavyatanwar/Desktop/ev-charging/node_modules/use-script/src/utils.ts"],"sourcesContent":["import { ScriptProps } from './use-script'\n\nlet testLoadFn: undefined | (() => Promise<void>)\n\nexport type ErrorState = ErrorEvent | null\n\nexport const setTestLoadMode = (load: () => Promise<void>) => {\n    if (process.env.NODE_ENV !== 'production') {\n        testLoadFn = load\n    }\n}\n\nexport function loadScript({\n    src,\n    ...attr\n}: ScriptProps): Promise<ScriptLoadResult> {\n    if (process.env.NODE_ENV !== 'production' && testLoadFn) {\n        const script = document.createElement('script')\n        script.src = src\n        Object.keys(attr).forEach(key => ((script as any)[key] = attr[key]))\n        document.body.appendChild(script)\n        return testLoadFn()\n            .then<ScriptLoadResult>(() => ({\n                success: true,\n                element: script,\n                script: src,\n                error: null,\n            }))\n            .catch<ScriptLoadResult>(() => ({\n                success: false,\n                element: script,\n                script: src,\n                error: new ErrorEvent('test'),\n            }))\n    }\n\n    return new Promise<ScriptLoadResult>(resolve => {\n        const script = document.createElement('script')\n        script.src = src\n        Object.keys(attr).forEach(key => ((script as any)[key] = attr[key]))\n        script.addEventListener('load', () =>\n            resolve({\n                element: script,\n                script: src,\n                success: true,\n                error: null,\n            }),\n        )\n        script.addEventListener('error', e =>\n            resolve({\n                element: script,\n                script: src,\n                success: false,\n                error: e,\n            }),\n        )\n        document.body.appendChild(script)\n    })\n}\n\nexport function getScriptTag(script: string) {\n    if (typeof document === 'undefined') {\n        return\n    }\n\n    return document.querySelector(\n        `script[src='${script}']`,\n    ) as HTMLScriptElement\n}\n\nexport function removeFailedScript(script: string) {\n    const node = document.querySelector(`script[src='${script}']`)\n\n    if (node && node.parentNode) {\n        node.parentNode.removeChild(node)\n    }\n}\n\nexport interface LoadResult {\n    skipped: number\n    succeeded: string[]\n    failed: string[]\n}\nexport interface ScriptLoadResult {\n    element: HTMLScriptElement | undefined\n    script: string\n    success: boolean\n    error: ErrorState\n}\n"],"mappings":";AAEA,IAAIA,UAA6C;AAIjD,OAAO,IAAMC,eAAe,GAAG,SAAAA,CAACC,IAAyB;EACrD,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;IACvCL,UAAU,GAAGE,IAAI;;AAEzB,CAAC;AAED,OAAM,SAAUI,UAAUA,CAACC,EAGb;EAFV,IAAAC,GAAG,GAAAD,EAAA,CAAAC,GAAA;IACAC,IAAI,GAAAC,MAAA,CAAAH,EAAA,EAFgB,OAG1B,CADU;EAEP,IAAIJ,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIL,UAAU,EAAE;IACrD,IAAMW,QAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,QAAM,CAACH,GAAG,GAAGA,GAAG;IAChBM,MAAM,CAACC,IAAI,CAACN,IAAI,CAAC,CAACO,OAAO,CAAC,UAAAC,GAAG;MAAI,OAAEN,QAAc,CAACM,GAAG,CAAC,GAAGR,IAAI,CAACQ,GAAG,CAAC;IAAjC,CAAkC,CAAC;IACpEL,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,QAAM,CAAC;IACjC,OAAOX,UAAU,EAAE,CACdoB,IAAI,CAAmB;MAAM,OAAC;QAC3BC,OAAO,EAAE,IAAI;QACbC,OAAO,EAAEX,QAAM;QACfY,MAAM,EAAEf,GAAG;QACXgB,KAAK,EAAE;OACV;IAL6B,CAK5B,CAAC,CACFC,KAAK,CAAmB;MAAM,OAAC;QAC5BJ,OAAO,EAAE,KAAK;QACdC,OAAO,EAAEX,QAAM;QACfY,MAAM,EAAEf,GAAG;QACXgB,KAAK,EAAE,IAAIE,UAAU,CAAC,MAAM;OAC/B;IAL8B,CAK7B,CAAC;;EAGX,OAAO,IAAIC,OAAO,CAAmB,UAAAC,OAAO;IACxC,IAAML,MAAM,GAAGX,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CU,MAAM,CAACf,GAAG,GAAGA,GAAG;IAChBM,MAAM,CAACC,IAAI,CAACN,IAAI,CAAC,CAACO,OAAO,CAAC,UAAAC,GAAG;MAAI,OAAEM,MAAc,CAACN,GAAG,CAAC,GAAGR,IAAI,CAACQ,GAAG,CAAC;IAAjC,CAAkC,CAAC;IACpEM,MAAM,CAACM,gBAAgB,CAAC,MAAM,EAAE;MAC5B,OAAAD,OAAO,CAAC;QACJN,OAAO,EAAEC,MAAM;QACfA,MAAM,EAAEf,GAAG;QACXa,OAAO,EAAE,IAAI;QACbG,KAAK,EAAE;OACV,CAAC;IALF,CAKE,CACL;IACDD,MAAM,CAACM,gBAAgB,CAAC,OAAO,EAAE,UAAAC,CAAC;MAC9B,OAAAF,OAAO,CAAC;QACJN,OAAO,EAAEC,MAAM;QACfA,MAAM,EAAEf,GAAG;QACXa,OAAO,EAAE,KAAK;QACdG,KAAK,EAAEM;OACV,CAAC;IALF,CAKE,CACL;IACDlB,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACI,MAAM,CAAC;EACrC,CAAC,CAAC;AACN;AAEA,OAAM,SAAUQ,YAAYA,CAACR,MAAc;EACvC,IAAI,OAAOX,QAAQ,KAAK,WAAW,EAAE;IACjC;;EAGJ,OAAOA,QAAQ,CAACoB,aAAa,CACzB,iBAAeT,MAAM,OAAI,CACP;AAC1B;AAEA,OAAM,SAAUU,kBAAkBA,CAACV,MAAc;EAC7C,IAAMW,IAAI,GAAGtB,QAAQ,CAACoB,aAAa,CAAC,iBAAeT,MAAM,OAAI,CAAC;EAE9D,IAAIW,IAAI,IAAIA,IAAI,CAACC,UAAU,EAAE;IACzBD,IAAI,CAACC,UAAU,CAACC,WAAW,CAACF,IAAI,CAAC;;AAEzC"},"metadata":{},"sourceType":"module","externalDependencies":[]}