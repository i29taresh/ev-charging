{"ast":null,"code":"import Geocoder from './geocoder';\nimport template from 'lodash.template';\nimport isEqual from 'lodash.isequal';\nimport extent from 'turf-extent';\nlet fs = require('fs'); // substack/brfs#39\nlet tmpl = template(fs.readFileSync(__dirname + '/../templates/inputs.html', 'utf8'));\n\n/**\n * Inputs controller\n *\n * @param {HTMLElement} el Summary parent container\n * @param {Object} store A redux store\n * @param {Object} actions Actions an element can dispatch\n * @param {Object} map The mapboxgl instance\n * @private\n */\nexport default class Inputs {\n  constructor(el, store, actions, map) {\n    const {\n      originQuery,\n      destinationQuery,\n      profile,\n      controls\n    } = store.getState();\n    el.innerHTML = tmpl({\n      originQuery,\n      destinationQuery,\n      profile,\n      controls\n    });\n    this.container = el;\n    this.actions = actions;\n    this.store = store;\n    this._map = map;\n    this.onAdd();\n    this.render();\n  }\n  animateToCoordinates(mode, coords) {\n    const {\n      origin,\n      destination\n    } = this.store.getState();\n    if (origin.geometry && destination.geometry && !isEqual(origin.geometry, destination.geometry)) {\n      // Animate map to fit bounds.\n      const bb = extent({\n        type: 'FeatureCollection',\n        features: [origin, destination]\n      });\n      this._map.fitBounds([[bb[0], bb[1]], [bb[2], bb[3]]], {\n        padding: 80\n      });\n    } else {\n      this._map.flyTo({\n        center: coords\n      });\n    }\n  }\n  onAdd() {\n    const {\n      clearOrigin,\n      clearDestination,\n      createOrigin,\n      createDestination,\n      setProfile,\n      reverse\n    } = this.actions;\n    const {\n      geocoder,\n      accessToken,\n      flyTo,\n      placeholderOrigin,\n      placeholderDestination,\n      zoom\n    } = this.store.getState();\n    this.originInput = new Geocoder(Object.assign({}, {\n      accessToken\n    }, geocoder, {\n      flyTo,\n      placeholder: placeholderOrigin,\n      zoom\n    }));\n    const originEl = this.originInput.onAdd(this._map);\n    const originContainerEl = this.container.querySelector('#mapbox-directions-origin-input');\n    originContainerEl.appendChild(originEl);\n    this.destinationInput = new Geocoder(Object.assign({}, {\n      accessToken\n    }, geocoder, {\n      flyTo,\n      placeholder: placeholderDestination,\n      zoom\n    }));\n    const destinationEl = this.destinationInput.onAdd(this._map);\n    this.container.querySelector('#mapbox-directions-destination-input').appendChild(destinationEl);\n    this.originInput.on('result', e => {\n      const coords = e.result.center;\n      createOrigin(coords);\n      this.animateToCoordinates('origin', coords);\n    });\n    this.originInput.on('clear', clearOrigin);\n    this.destinationInput.on('result', e => {\n      const coords = e.result.center;\n      createDestination(coords);\n      this.animateToCoordinates('destination', coords);\n    });\n    this.destinationInput.on('clear', clearDestination);\n\n    // Driving / Walking / Cycling profiles\n    const profiles = this.container.querySelectorAll('input[type=\"radio\"]');\n    Array.prototype.forEach.call(profiles, el => {\n      el.addEventListener('change', () => {\n        setProfile(el.value);\n      });\n    });\n\n    // Reversing Origin / Destination\n    this.container.querySelector('.js-reverse-inputs').addEventListener('click', () => {\n      const {\n        origin,\n        destination\n      } = this.store.getState();\n      if (origin) this.actions.queryDestination(origin.geometry.coordinates);\n      if (destination) this.actions.queryOrigin(destination.geometry.coordinates);\n      reverse();\n    });\n  }\n  render() {\n    this.store.subscribe(() => {\n      const {\n        originQuery,\n        destinationQuery,\n        originQueryCoordinates,\n        destinationQueryCoordinates\n      } = this.store.getState();\n      if (originQuery) {\n        this.originInput.query(originQuery);\n        this.actions.queryOrigin(null);\n      }\n      if (destinationQuery) {\n        this.destinationInput.query(destinationQuery);\n        this.actions.queryDestination(null);\n      }\n      if (originQueryCoordinates) {\n        this.originInput.setInput(originQueryCoordinates);\n        this.animateToCoordinates('origin', originQueryCoordinates);\n        this.actions.queryOriginCoordinates(null);\n      }\n      if (destinationQueryCoordinates) {\n        this.destinationInput.setInput(destinationQueryCoordinates);\n        this.animateToCoordinates('destination', destinationQueryCoordinates);\n        this.actions.queryDestinationCoordinates(null);\n      }\n    });\n  }\n}","map":{"version":3,"names":["Geocoder","template","isEqual","extent","fs","require","tmpl","readFileSync","__dirname","Inputs","constructor","el","store","actions","map","originQuery","destinationQuery","profile","controls","getState","innerHTML","container","_map","onAdd","render","animateToCoordinates","mode","coords","origin","destination","geometry","bb","type","features","fitBounds","padding","flyTo","center","clearOrigin","clearDestination","createOrigin","createDestination","setProfile","reverse","geocoder","accessToken","placeholderOrigin","placeholderDestination","zoom","originInput","Object","assign","placeholder","originEl","originContainerEl","querySelector","appendChild","destinationInput","destinationEl","on","e","result","profiles","querySelectorAll","Array","prototype","forEach","call","addEventListener","value","queryDestination","coordinates","queryOrigin","subscribe","originQueryCoordinates","destinationQueryCoordinates","query","setInput","queryOriginCoordinates","queryDestinationCoordinates"],"sources":["/Users/bhavyatanwar/Desktop/ev-charging/node_modules/mapbox-gl-direction-location/src/controls/inputs.js"],"sourcesContent":["import Geocoder from './geocoder';\nimport template from 'lodash.template';\nimport isEqual from 'lodash.isequal';\nimport extent from 'turf-extent';\n\nlet fs = require('fs'); // substack/brfs#39\nlet tmpl = template(fs.readFileSync(__dirname + '/../templates/inputs.html', 'utf8'));\n\n/**\n * Inputs controller\n *\n * @param {HTMLElement} el Summary parent container\n * @param {Object} store A redux store\n * @param {Object} actions Actions an element can dispatch\n * @param {Object} map The mapboxgl instance\n * @private\n */\nexport default class Inputs {\n  constructor(el, store, actions, map) {\n    const { originQuery, destinationQuery, profile, controls } = store.getState();\n\n    el.innerHTML = tmpl({\n      originQuery,\n      destinationQuery,\n      profile,\n      controls\n    });\n\n    this.container = el;\n    this.actions = actions;\n    this.store = store;\n    this._map = map;\n\n    this.onAdd();\n    this.render();\n  }\n\n  animateToCoordinates(mode, coords) {\n    const { origin, destination } = this.store.getState();\n\n    if (origin.geometry &&\n        destination.geometry &&\n        !isEqual(origin.geometry, destination.geometry)) {\n\n      // Animate map to fit bounds.\n      const bb = extent({\n        type: 'FeatureCollection',\n        features: [origin, destination]\n      });\n\n      this._map.fitBounds([[bb[0], bb[1]], [bb[2], bb[3]]], { padding: 80 });\n    } else {\n      this._map.flyTo({ center: coords });\n    }\n  }\n\n  onAdd() {\n    const {\n      clearOrigin,\n      clearDestination,\n      createOrigin,\n      createDestination,\n      setProfile,\n      reverse\n    } = this.actions;\n\n    const { geocoder, accessToken, flyTo, placeholderOrigin, placeholderDestination, zoom } = this.store.getState();\n\n    this.originInput = new Geocoder(Object.assign({}, {\n      accessToken\n    }, geocoder, {flyTo, placeholder: placeholderOrigin, zoom}));\n\n    const originEl = this.originInput.onAdd(this._map);\n    const originContainerEl = this.container.querySelector('#mapbox-directions-origin-input');\n    originContainerEl.appendChild(originEl);\n\n    this.destinationInput = new Geocoder(Object.assign({}, {\n      accessToken\n    }, geocoder, {flyTo, placeholder: placeholderDestination, zoom}));\n\n    const destinationEl = this.destinationInput.onAdd(this._map);\n    this.container.querySelector('#mapbox-directions-destination-input').appendChild(destinationEl);\n\n    this.originInput.on('result', (e) => {\n      const coords = e.result.center;\n      createOrigin(coords);\n      this.animateToCoordinates('origin', coords);\n    });\n\n    this.originInput.on('clear', clearOrigin);\n\n    this.destinationInput.on('result', (e) => {\n      const coords = e.result.center;\n      createDestination(coords);\n      this.animateToCoordinates('destination', coords);\n    });\n\n    this.destinationInput.on('clear', clearDestination);\n\n    // Driving / Walking / Cycling profiles\n    const profiles = this.container.querySelectorAll('input[type=\"radio\"]');\n    Array.prototype.forEach.call(profiles, (el) => {\n      el.addEventListener('change', () => {\n        setProfile(el.value);\n      });\n    });\n\n    // Reversing Origin / Destination\n    this.container\n      .querySelector('.js-reverse-inputs')\n      .addEventListener('click', () => {\n        const { origin, destination } = this.store.getState();\n        if (origin) this.actions.queryDestination(origin.geometry.coordinates);\n        if (destination) this.actions.queryOrigin(destination.geometry.coordinates);\n        reverse();\n      });\n  }\n\n  render() {\n    this.store.subscribe(() => {\n      const {\n        originQuery,\n        destinationQuery,\n        originQueryCoordinates,\n        destinationQueryCoordinates\n      } = this.store.getState();\n\n      if (originQuery) {\n        this.originInput.query(originQuery);\n        this.actions.queryOrigin(null);\n      }\n\n      if (destinationQuery) {\n        this.destinationInput.query(destinationQuery);\n        this.actions.queryDestination(null);\n      }\n\n      if (originQueryCoordinates) {\n        this.originInput.setInput(originQueryCoordinates);\n        this.animateToCoordinates('origin', originQueryCoordinates);\n        this.actions.queryOriginCoordinates(null);\n      }\n\n      if (destinationQueryCoordinates) {\n        this.destinationInput.setInput(destinationQueryCoordinates);\n        this.animateToCoordinates('destination', destinationQueryCoordinates);\n        this.actions.queryDestinationCoordinates(null);\n      }\n    });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}